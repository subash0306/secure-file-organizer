import hashlib
import os

def sha256(file_path):
    h = hashlib.sha256()
    with open(file_path, "rb") as f:
        while chunk := f.read(4096):
            h.update(chunk)
    return h.hexdigest()

def scan_file(file_path, use_vt=False):
    if not os.path.exists(file_path):
        raise FileNotFoundError(f"File not found: {file_path}")

    size = os.path.getsize(file_path)
    file_hash = sha256(file_path)

    # Simple heuristic
    if size == 0:
        result = "infected"
        reason = "Empty file"
    elif size > 10_000_000:
        result = "suspicious"
        reason = "Large file"
    else:
        result = "clean"
        reason = "No issues"

    return {"result": result, "reason": reason, "features": {"sha256": file_hash}}
